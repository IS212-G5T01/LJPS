<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <title>Skills</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Stylesheets-->
    <link
			rel="stylesheet"
			type="text/css"
			href="//fonts.googleapis.com/css?family=Poppins:400,500,600%7CTeko:300,400,500%7CMaven+Pro:500"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="../css/fonts.css" />
		<link rel="stylesheet" href="../css/style.css" />
		<link rel="stylesheet" href="../css/index.css" />
    
  </head>
  <body>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container"><span></span><span></span><span></span><span></span>
        </div>
      </div>
    </div>
    <div class="page">
      <div id="home">
        <!-- Page Header-->
        <header class="section page-header">
          <!-- RD Navbar-->
          <div class="rd-navbar-wrap">
            <nav class="rd-navbar rd-navbar-classic" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-xxl-layout="rd-navbar-static" data-xxl-device-layout="rd-navbar-static" data-lg-stick-up-offset="46px" data-xl-stick-up-offset="46px" data-xxl-stick-up-offset="46px" data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
              <div class="rd-navbar-main-outer"
              style="background-color: #668aff15">
                <div class="rd-navbar-main">
                  <!-- RD Navbar Panel-->
                  <div class="rd-navbar-panel">
                    <!-- RD Navbar Toggle-->
                    <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                    <!-- RD Navbar Brand-->
                    <div class="rd-navbar-brand">
											<a class="brand" href="index.html">
												<h3 style="margin-left: 80px">LJPS</h3>
											</a>
										</div>
                  </div>
                  <div class="rd-navbar-main-element">
                    <div class="rd-navbar-nav-wrap">
                      <ul class="rd-navbar-nav">
                        <li class="rd-nav-item"><a class="rd-nav-link text-decoration-none" href="HR_roles.html">HR Roles</a></li>
                        <li class="rd-nav-item active"><a class="rd-nav-link text-decoration-none" href="skills.html">Skills</a></li>
                        <li class="rd-nav-item"><a class="rd-nav-link text-decoration-none" href="view_course.html">Courses</a></li>
                        <li class="rd-nav-item"><a class="rd-nav-link text-decoration-none" href="#">Learners</a></li>
                        <li class="rd-nav-item"><a class="rd-nav-link text-decoration-none" href="">Profile</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </header>
        <!-- Main content starts here  -->
          <div class="container mt-3 py-5 h-100">
            <div class="row justify-content-center align-items-center h-100">
              <div class="col-12 col-lg-9 col-xl-7">
                <div class="card shadow-2-strong card-registration" style="border-radius: 15px;">
                  <div class="card-body p-4 p-md-5">
                    <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Create new skills</h3>
                    <form>
                      <div class="row">
                        <div class="col-md mb-1">
                          <div class="form-outline">
                            <label for="skillName">Skill Name</label> <small style="color: grey;">(max character: 50)</small>
                            <input type="text" class="form-control" id="skillName" placeholder="Enter skill" required>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md mb-1">
                          <div class="form-outline">
                            <label for="skillDescription">Skill Description</label> <small style="color: grey;">(max character: 255)</small>
                            <textarea class="form-control" id="skillDescription" rows="3" placeholder="Enter Description" required></textarea>
                          </div>
                        </div>
                      </div>

                      <div class="mt-4 pt-2">
                        <button type="submit" class="btn btn-primary" onclick="createSkills()">Create</button>
                      </div>
                      <br>
                      <a href="skills.html">View all existing skills</a>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
<!-- Previous layout -->
        <!-- <div class="container text-start">
          <h2 class="mb-5 ">Create new skill</h2>
          <form>
            <div class="form-group mb-3 w-50">
              <label for="skillName">Skill Name</label>
              <input type="text" class="form-control" id="skillName" placeholder="Enter skill" required>
            </div>
            <div class="form-group mb-3 w-50 ">
              <label for="skillStatus">Skill Status</label>
              <select class="form-control" id="skillStatus">
                <option value="0">Active</option>
                <option value="1">Inactive</option>
              </select>
            </div>
            <div class="form-group mb-3 w-50">
              <label for="skillDescription">Skill Description</label>
              <textarea class="form-control" id="skillDescription" rows="3" placeholder="Enter Description" required></textarea>
          </div>
            <button type="submit" class="btn btn-primary" onclick="createSkills()">Create</button>
        </form>
      </div>
    </div> -->

    <script>
      const backendUrl = 'http://127.0.0.1:5000';
      const create_skills = 'createSkills';
      var skillName = document.getElementById("skillName")
      var skillDescription = document.getElementById("skillDescription")
      async function createSkills(){
        event.preventDefault();
        if (skillName.value != "" && skillDescription.value!=""){
          if (skillName.value.length > 50 && skillDescription.value.length > 255){
            alert("Both Skill name and description has reached the maximum characters.")
          }else if(skillName.value.length >50){
            alert("Skill name has reached the maximum of 50 characters.")
          }else if(skillDescription.value.length >255){
            alert("Skill description has reached the maximum of 255 characters.")
          }else{
          try {
            const response = await fetch(`${backendUrl}/${create_skills}`, {
              method: 'POST',
              headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                skill_name: skillName.value,
                skill_desc: skillDescription.value,
                skill_status: 1
              })
            });
            const result = await response.json();
            if (result.code == 400){
              alert("Skill already exists. Skill creation unsuccessful.")
              return result
            }
            alert(skillName.value +" skill successfully created");
            skillName.value=""
            skillDescription.value=""
            skillStatus="0"
            
            return result;
          } catch (err) {
            console.log(err);
          }
        }
        }else{
          alert("Fill up all inputs!")
        }
      }
    </script>
    <!-- Javascript-->
    <script src="../js/core.min.js"></script>
    <script src="../js/script.js"></script>
  </body>
</html>