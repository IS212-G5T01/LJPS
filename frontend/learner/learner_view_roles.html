<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <title>List of Roles</title>
    <meta name="format-detection" content="telephone=no" />
    <meta
      name="viewport"
      content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
    <!-- Stylesheets-->
    <link
      rel="stylesheet"
      type="text/css"
      href="//fonts.googleapis.com/css?family=Poppins:400,500,600%7CTeko:300,400,500%7CMaven+Pro:500"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../css/fonts.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/index.css" />
  </head>

  <body>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container"></div>
      </div>
    </div>
    <div class="page">
      <div id="home">
        <!-- Page Header-->
        <header class="section page-header">
          <!-- RD Navbar-->
          <div class="rd-navbar-wrap">
            <nav
              class="rd-navbar rd-navbar-classic"
              data-layout="rd-navbar-fixed"
              data-sm-layout="rd-navbar-fixed"
              data-md-layout="rd-navbar-fixed"
              data-md-device-layout="rd-navbar-fixed"
              data-lg-layout="rd-navbar-static"
              data-lg-device-layout="rd-navbar-fixed"
              data-xl-layout="rd-navbar-static"
              data-xl-device-layout="rd-navbar-static"
              data-xxl-layout="rd-navbar-static"
              data-xxl-device-layout="rd-navbar-static"
              data-lg-stick-up-offset="46px"
              data-xl-stick-up-offset="46px"
              data-xxl-stick-up-offset="46px"
              data-lg-stick-up="true"
              data-xl-stick-up="true"
              data-xxl-stick-up="true"
            >
              <div class="rd-navbar-main-outer">
                <div class="rd-navbar-main">
                  <!-- RD Navbar Panel-->
                  <div class="rd-navbar-panel">
                    <!-- RD Navbar Toggle-->
                    <button
                      class="rd-navbar-toggle"
                      data-rd-navbar-toggle=".rd-navbar-nav-wrap"
                    >
                      <span></span>
                    </button>
                    <!-- RD Navbar Brand-->
                    <div class="rd-navbar-brand">
                      <a class="brand" href="landing_page.html">
                        <h3 style="margin-left: 80px">LJPS</h3>
                      </a>
                    </div>
                  </div>
                  <div class="rd-navbar-main-element">
                    <div class="rd-navbar-nav-wrap">
                      <ul class="rd-navbar-nav">
                        <li class="rd-nav-item">
                          <a class="rd-nav-link" href="learner_profile.html"
                            >Profile</a
                          >
                        </li>

                        <li class="rd-nav-item">
                          <a class="rd-nav-link" href="journey_step_one.html"
                            >Start Learning Journey</a
                          >
                        </li>

                        <li class="rd-nav-item active">
                          <a
                            class="rd-nav-link text-decoration-none"
                            href="learner_view_roles.html"
                            >Roles</a
                          >
                        </li>
                        <li class="rd-nav-item">
                          <a
                            class="rd-nav-link text-decoration-none"
                            href="learner_view_skills.html"
                            >Skills</a
                          >
                        </li>
                        <li class="rd-nav-item">
                          <a
                            class="rd-nav-link text-decoration-none"
                            href="view_course.html"
                            >Courses</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </header>
      </div>
      <!-- Main content starts here  -->
      <div class="container mt-3 mb-5">
        <h3>List of roles available</h3>
        <div class="alert alert-danger mt-5" id="res" role="alert"></div>
        <table class="table borderless table-hover mt-5" id="table"></table>
      </div>
    </div>
    <script>
      var backendUrl = "http://127.0.0.1:5000";
      var getAllJobRole = "getAllJobRole";

      async function getAllRole() {
        const response = await fetch(`${backendUrl}/${getAllJobRole}`)
          .then((response) => response.json())
          .then((data) => {
			
            if (data.code == 404) {
				
              document.getElementById("res").innerText = "No job roles found";
            } else {
              document.getElementById("res").style.display = "None";

              // console.log(JSON.parse(JSON.stringify(data.data)));
              result = JSON.parse(JSON.stringify(data.data));
              message_str = `
              <thead>
                <tr class="bg-light">
                
                <th>Job Role Name</th>
                <th>Job Role Description</th>
                <th>Action</th>
                </tr>
              </thead>`;
              for (const role of result) {
                if (role["job_role_status"] == 0) {
                  message_str += `
              <tbody>
                <tr>
                  <td>${role["job_role_name"]}</td>
                  <td class="text-wrap w-50">${role["job_role_desc"]}</td>
                  <td> <button type="button" class="btn btn-primary" onClick="location.href='./learner_view_skills.html?job=${role["job_role_name"]}&id=${role["job_role_id"]}'">View skills</button> </td>
                </tr>
              </tbody>
              `;
                }
              }
              // <th scope="row">${role["job_role_id"]}</th> removed
              document.getElementById("table").innerHTML = message_str;
              return data.roles;
            }
          })
          .catch((error) => {
            // Errors when calling the service; such as network error,
            // service offline, etc
            console.log(error);
          });
      }

      getAllRole();
    </script>
    <!-- Javascript-->
    <script src="../js/core.min.js"></script>
    <script src="../js/script.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </body>
</html>
